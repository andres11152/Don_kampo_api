{"version":3,"file":"profile.controller.js","names":["getConnection","getUserProfile","req","res","client","userId","user","id","result","query","rows","length","status","json","message","error","console","release"],"sources":["../../src/controllers/profile.controller.js"],"sourcesContent":["import { getConnection } from '../database/connection.js';\r\n\r\nexport const getUserProfile = async (req, res) => {\r\n  let client;\r\n  try {\r\n    const userId = req.user.id;\r\n    client = await getConnection();\r\n    const result = await client.query(\r\n      'SELECT id, user_name, phone, lastname, email, user_type FROM users WHERE id = $1',\r\n      [userId]\r\n    );\r\n\r\n    if (result.rows.length === 0) {\r\n      return res.status(404).json({ message: 'Usuario no encontrado' });\r\n    }\r\n    const user = result.rows[0];\r\n    res.status(200).json(user);\r\n    \r\n  } catch (error) {\r\n    console.error('Error al obtener el perfil del usuario:', error);\r\n    res.status(500).json({ message: 'Error al obtener el perfil del usuario' });\r\n  } finally {\r\n    if (client) {\r\n      client.release();\r\n    }\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,2BAA2B;AAEzD,OAAO,MAAMC,cAAc,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;EAChD,IAAIC,MAAM;EACV,IAAI;IACF,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAACC,EAAE;IAC1BH,MAAM,GAAG,MAAMJ,aAAa,CAAC,CAAC;IAC9B,MAAMQ,MAAM,GAAG,MAAMJ,MAAM,CAACK,KAAK,CAC/B,kFAAkF,EAClF,CAACJ,MAAM,CACT,CAAC;IAED,IAAIG,MAAM,CAACE,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MAC5B,OAAOR,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAwB,CAAC,CAAC;IACnE;IACA,MAAMR,IAAI,GAAGE,MAAM,CAACE,IAAI,CAAC,CAAC,CAAC;IAC3BP,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACP,IAAI,CAAC;EAE5B,CAAC,CAAC,OAAOS,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;IAC/DZ,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAyC,CAAC,CAAC;EAC7E,CAAC,SAAS;IACR,IAAIV,MAAM,EAAE;MACVA,MAAM,CAACa,OAAO,CAAC,CAAC;IAClB;EACF;AACF,CAAC","ignoreList":[]}