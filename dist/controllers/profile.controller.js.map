{"version":3,"file":"profile.controller.js","names":["_connection","require","getUserProfile","req","res","client","userId","user","id","getConnection","result","query","rows","length","status","json","message","error","console","release","exports"],"sources":["../../src/controllers/profile.controller.js"],"sourcesContent":["import { getConnection } from '../database/connection.js';\r\n\r\nexport const getUserProfile = async (req, res) => {\r\n  let client;\r\n  try {\r\n    const userId = req.user.id;\r\n    client = await getConnection();\r\n    const result = await client.query(\r\n      'SELECT id, user_name, phone, lastname, email, user_type FROM users WHERE id = $1',\r\n      [userId]\r\n    );\r\n\r\n    if (result.rows.length === 0) {\r\n      return res.status(404).json({ message: 'Usuario no encontrado' });\r\n    }\r\n    const user = result.rows[0];\r\n    res.status(200).json(user);\r\n    \r\n  } catch (error) {\r\n    console.error('Error al obtener el perfil del usuario:', error);\r\n    res.status(500).json({ message: 'Error al obtener el perfil del usuario' });\r\n  } finally {\r\n    if (client) {\r\n      client.release();\r\n    }\r\n  }\r\n};\r\n"],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AAEO,MAAMC,cAAc,GAAG,MAAAA,CAAOC,GAAG,EAAEC,GAAG,KAAK;EAChD,IAAIC,MAAM;EACV,IAAI;IACF,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAACC,EAAE;IAC1BH,MAAM,GAAG,MAAM,IAAAI,yBAAa,EAAC,CAAC;IAC9B,MAAMC,MAAM,GAAG,MAAML,MAAM,CAACM,KAAK,CAC/B,kFAAkF,EAClF,CAACL,MAAM,CACT,CAAC;IAED,IAAII,MAAM,CAACE,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MAC5B,OAAOT,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAwB,CAAC,CAAC;IACnE;IACA,MAAMT,IAAI,GAAGG,MAAM,CAACE,IAAI,CAAC,CAAC,CAAC;IAC3BR,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACR,IAAI,CAAC;EAE5B,CAAC,CAAC,OAAOU,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;IAC/Db,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAyC,CAAC,CAAC;EAC7E,CAAC,SAAS;IACR,IAAIX,MAAM,EAAE;MACVA,MAAM,CAACc,OAAO,CAAC,CAAC;IAClB;EACF;AACF,CAAC;AAACC,OAAA,CAAAlB,cAAA,GAAAA,cAAA","ignoreList":[]}