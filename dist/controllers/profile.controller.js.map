{"version":3,"file":"profile.controller.js","names":["getConnection","getUserProfile","_ref","_asyncToGenerator","req","res","client","userId","user","id","result","query","rows","length","status","json","message","error","console","release","_x","_x2","apply","arguments"],"sources":["../../src/controllers/profile.controller.js"],"sourcesContent":["import { getConnection } from '../database/connection.js';\r\n\r\nexport const getUserProfile = async (req, res) => {\r\n  let client;\r\n  try {\r\n    const userId = req.user.id;\r\n    client = await getConnection();\r\n    const result = await client.query(\r\n      'SELECT id, user_name, phone, lastname, email, user_type FROM users WHERE id = $1',\r\n      [userId]\r\n    );\r\n\r\n    if (result.rows.length === 0) {\r\n      return res.status(404).json({ message: 'Usuario no encontrado' });\r\n    }\r\n    const user = result.rows[0];\r\n    res.status(200).json(user);\r\n    \r\n  } catch (error) {\r\n    console.error('Error al obtener el perfil del usuario:', error);\r\n    res.status(500).json({ message: 'Error al obtener el perfil del usuario' });\r\n  } finally {\r\n    if (client) {\r\n      client.release();\r\n    }\r\n  }\r\n};\r\n"],"mappings":";AAAA,SAASA,aAAa,QAAQ,2BAA2B;AAEzD,OAAO,MAAMC,cAAc;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,GAAG,EAAEC,GAAG,EAAK;IAChD,IAAIC,MAAM;IACV,IAAI;MACF,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAACC,EAAE;MAC1BH,MAAM,SAASN,aAAa,CAAC,CAAC;MAC9B,MAAMU,MAAM,SAASJ,MAAM,CAACK,KAAK,CAC/B,kFAAkF,EAClF,CAACJ,MAAM,CACT,CAAC;MAED,IAAIG,MAAM,CAACE,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;QAC5B,OAAOR,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;UAAEC,OAAO,EAAE;QAAwB,CAAC,CAAC;MACnE;MACA,MAAMR,IAAI,GAAGE,MAAM,CAACE,IAAI,CAAC,CAAC,CAAC;MAC3BP,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAACP,IAAI,CAAC;IAE5B,CAAC,CAAC,OAAOS,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yCAAyC,EAAEA,KAAK,CAAC;MAC/DZ,GAAG,CAACS,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;QAAEC,OAAO,EAAE;MAAyC,CAAC,CAAC;IAC7E,CAAC,SAAS;MACR,IAAIV,MAAM,EAAE;QACVA,MAAM,CAACa,OAAO,CAAC,CAAC;MAClB;IACF;EACF,CAAC;EAAA,gBAxBYlB,cAAcA,CAAAmB,EAAA,EAAAC,GAAA;IAAA,OAAAnB,IAAA,CAAAoB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAwB1B","ignoreList":[]}