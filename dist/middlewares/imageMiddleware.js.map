{"version":3,"file":"imageMiddleware.js","names":["sharp","optimizeImage","req","res","next","file","buffer","resize","fit","jpeg","quality","toBuffer","err","status","send","optimizedImage"],"sources":["../../src/middlewares/imageMiddleware.js"],"sourcesContent":["import sharp from 'sharp';\r\n\r\nexport const optimizeImage = (req, res, next) => {\r\n  if (req.file) {\r\n    \r\n    sharp(req.file.buffer)\r\n      .resize(800, 800, { fit: 'inside' })  \r\n      .jpeg({ quality: 80 })  \r\n      .toBuffer((err, buffer) => {\r\n        if (err) {\r\n          return res.status(500).send('Error al optimizar la imagen');\r\n        }\r\n        req.optimizedImage = buffer;  \r\n        next();  \r\n      });\r\n  } else {\r\n    next();\r\n  }\r\n};\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,aAAa,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC/C,IAAIF,GAAG,CAACG,IAAI,EAAE;IAEZL,KAAK,CAACE,GAAG,CAACG,IAAI,CAACC,MAAM,CAAC,CACnBC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE;MAAEC,GAAG,EAAE;IAAS,CAAC,CAAC,CACnCC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAG,CAAC,CAAC,CACrBC,QAAQ,CAAC,CAACC,GAAG,EAAEN,MAAM,KAAK;MACzB,IAAIM,GAAG,EAAE;QACP,OAAOT,GAAG,CAACU,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,8BAA8B,CAAC;MAC7D;MACAZ,GAAG,CAACa,cAAc,GAAGT,MAAM;MAC3BF,IAAI,CAAC,CAAC;IACR,CAAC,CAAC;EACN,CAAC,MAAM;IACLA,IAAI,CAAC,CAAC;EACR;AACF,CAAC","ignoreList":[]}