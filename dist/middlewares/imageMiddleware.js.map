{"version":3,"file":"imageMiddleware.js","names":["_sharp","_interopRequireDefault","require","optimizeImage","req","res","next","file","sharp","buffer","resize","fit","jpeg","quality","toBuffer","err","status","send","optimizedImage","exports"],"sources":["../../src/middlewares/imageMiddleware.js"],"sourcesContent":["import sharp from 'sharp';\r\n\r\nexport const optimizeImage = (req, res, next) => {\r\n  if (req.file) {\r\n    \r\n    sharp(req.file.buffer)\r\n      .resize(800, 800, { fit: 'inside' })  \r\n      .jpeg({ quality: 80 })  \r\n      .toBuffer((err, buffer) => {\r\n        if (err) {\r\n          return res.status(500).send('Error al optimizar la imagen');\r\n        }\r\n        req.optimizedImage = buffer;  \r\n        next();  \r\n      });\r\n  } else {\r\n    next();\r\n  }\r\n};\r\n"],"mappings":";;;;;;;AAAA,IAAAA,MAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEO,MAAMC,aAAa,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EAC/C,IAAIF,GAAG,CAACG,IAAI,EAAE;IAEZ,IAAAC,cAAK,EAACJ,GAAG,CAACG,IAAI,CAACE,MAAM,CAAC,CACnBC,MAAM,CAAC,GAAG,EAAE,GAAG,EAAE;MAAEC,GAAG,EAAE;IAAS,CAAC,CAAC,CACnCC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAAG,CAAC,CAAC,CACrBC,QAAQ,CAAC,CAACC,GAAG,EAAEN,MAAM,KAAK;MACzB,IAAIM,GAAG,EAAE;QACP,OAAOV,GAAG,CAACW,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC,8BAA8B,CAAC;MAC7D;MACAb,GAAG,CAACc,cAAc,GAAGT,MAAM;MAC3BH,IAAI,CAAC,CAAC;IACR,CAAC,CAAC;EACN,CAAC,MAAM;IACLA,IAAI,CAAC,CAAC;EACR;AACF,CAAC;AAACa,OAAA,CAAAhB,aAAA,GAAAA,aAAA","ignoreList":[]}