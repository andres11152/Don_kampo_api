{"version":3,"file":"validateData.js","names":["_multer","_interopRequireDefault","require","storage","multer","memoryStorage","upload","exports","single","handleMulterError","err","req","res","next","MulterError","status","json","message","parseMultipartData","body","variations","JSON","parse","error"],"sources":["../../src/middlewares/validateData.js"],"sourcesContent":["import multer from 'multer';\r\n\r\nconst storage = multer.memoryStorage();\r\nexport const upload = multer({ storage }).single('photo_url');\r\n\r\nexport const handleMulterError = (err, req, res, next) => {\r\n  if (err instanceof multer.MulterError) {\r\n    return res.status(400).json({ message: `Error en la carga del archivo: ${err.message}` });\r\n  }\r\n  if (err) {\r\n    return res.status(500).json({ message: 'Error interno del servidor' });\r\n  }\r\n  next();\r\n};\r\n\r\nexport const parseMultipartData = (req, res, next) => {\r\n  try {\r\n    if (req.body.variations) {\r\n      req.body.variations = JSON.parse(req.body.variations);\r\n    }\r\n    next();\r\n  } catch (error) {\r\n    return res.status(400).json({ message: 'Error al procesar los datos de variaciones' });\r\n  }\r\n};"],"mappings":";;;;;;;AAAA,IAAAA,OAAA,GAAAC,sBAAA,CAAAC,OAAA;AAEA,MAAMC,OAAO,GAAGC,eAAM,CAACC,aAAa,CAAC,CAAC;AAC/B,MAAMC,MAAM,GAAAC,OAAA,CAAAD,MAAA,GAAG,IAAAF,eAAM,EAAC;EAAED;AAAQ,CAAC,CAAC,CAACK,MAAM,CAAC,WAAW,CAAC;AAEtD,MAAMC,iBAAiB,GAAGA,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACxD,IAAIH,GAAG,YAAYN,eAAM,CAACU,WAAW,EAAE;IACrC,OAAOF,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE,kCAAkCP,GAAG,CAACO,OAAO;IAAG,CAAC,CAAC;EAC3F;EACA,IAAIP,GAAG,EAAE;IACP,OAAOE,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAA6B,CAAC,CAAC;EACxE;EACAJ,IAAI,CAAC,CAAC;AACR,CAAC;AAACN,OAAA,CAAAE,iBAAA,GAAAA,iBAAA;AAEK,MAAMS,kBAAkB,GAAGA,CAACP,GAAG,EAAEC,GAAG,EAAEC,IAAI,KAAK;EACpD,IAAI;IACF,IAAIF,GAAG,CAACQ,IAAI,CAACC,UAAU,EAAE;MACvBT,GAAG,CAACQ,IAAI,CAACC,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACX,GAAG,CAACQ,IAAI,CAACC,UAAU,CAAC;IACvD;IACAP,IAAI,CAAC,CAAC;EACR,CAAC,CAAC,OAAOU,KAAK,EAAE;IACd,OAAOX,GAAG,CAACG,MAAM,CAAC,GAAG,CAAC,CAACC,IAAI,CAAC;MAAEC,OAAO,EAAE;IAA6C,CAAC,CAAC;EACxF;AACF,CAAC;AAACV,OAAA,CAAAW,kBAAA,GAAAA,kBAAA","ignoreList":[]}